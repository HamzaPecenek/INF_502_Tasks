{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "51cc97cc",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:07.824705Z",
     "iopub.status.busy": "2025-12-22T10:51:07.824313Z",
     "iopub.status.idle": "2025-12-22T10:51:11.592489Z",
     "shell.execute_reply": "2025-12-22T10:51:11.591618Z"
    },
    "papermill": {
     "duration": 3.776929,
     "end_time": "2025-12-22T10:51:11.594633",
     "exception": false,
     "start_time": "2025-12-22T10:51:07.817704",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Libraries imported successfully!\n"
     ]
    }
   ],
   "source": [
    "import pandas as pd\n",
    "import numpy as np\n",
    "import matplotlib.pyplot as plt\n",
    "import seaborn as sns\n",
    "\n",
    "# Display settings\n",
    "pd.set_option('display.max_columns', None)\n",
    "pd.set_option('display.max_rows', 100)\n",
    "pd.set_option('display.width', None)\n",
    "\n",
    "print(\"Libraries imported successfully!\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "580f9b5d",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:11.604478Z",
     "iopub.status.busy": "2025-12-22T10:51:11.603511Z",
     "iopub.status.idle": "2025-12-22T10:51:11.816444Z",
     "shell.execute_reply": "2025-12-22T10:51:11.815401Z"
    },
    "papermill": {
     "duration": 0.219958,
     "end_time": "2025-12-22T10:51:11.818366",
     "exception": false,
     "start_time": "2025-12-22T10:51:11.598408",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Dataset reloaded with correct headers!\n",
      "Shape: 994 rows, 15 columns\n",
      "\n",
      "==================================================\n",
      "\n",
      "Column names:\n",
      "['Nr', 'D/H', 'Sorte', 'Farbe', 'Aktions-\\ndauer', 'A.ende-datum', 'A-ende-Uhrzeit', 'Startpreis=1?', 'Versandkosten', 'Anzahl Bilder', 'Bildqualität', 'Anbieterbewertung\\nAnzahl', 'Anbieter-PosBew.', 'Anzahl Gebote', 'Erzielter Preis']\n",
      "\n",
      "==================================================\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Nr</th>\n",
       "      <th>D/H</th>\n",
       "      <th>Sorte</th>\n",
       "      <th>Farbe</th>\n",
       "      <th>Aktions-\\ndauer</th>\n",
       "      <th>A.ende-datum</th>\n",
       "      <th>A-ende-Uhrzeit</th>\n",
       "      <th>Startpreis=1?</th>\n",
       "      <th>Versandkosten</th>\n",
       "      <th>Anzahl Bilder</th>\n",
       "      <th>Bildqualität</th>\n",
       "      <th>Anbieterbewertung\\nAnzahl</th>\n",
       "      <th>Anbieter-PosBew.</th>\n",
       "      <th>Anzahl Gebote</th>\n",
       "      <th>Erzielter Preis</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>330443001836</td>\n",
       "      <td>H</td>\n",
       "      <td>501</td>\n",
       "      <td>blau</td>\n",
       "      <td>3</td>\n",
       "      <td>17. Jun. 2010</td>\n",
       "      <td>08:29:00</td>\n",
       "      <td>ja</td>\n",
       "      <td>6.3</td>\n",
       "      <td>1</td>\n",
       "      <td>mittel</td>\n",
       "      <td>223</td>\n",
       "      <td>1</td>\n",
       "      <td>12</td>\n",
       "      <td>26.20</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>220619468373</td>\n",
       "      <td>H</td>\n",
       "      <td>501</td>\n",
       "      <td>blau</td>\n",
       "      <td>7</td>\n",
       "      <td>16. Jun. 2010</td>\n",
       "      <td>22:40:00</td>\n",
       "      <td>ja</td>\n",
       "      <td>5</td>\n",
       "      <td>1</td>\n",
       "      <td>mittel</td>\n",
       "      <td>633</td>\n",
       "      <td>1</td>\n",
       "      <td>15</td>\n",
       "      <td>35.66</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>150455004183</td>\n",
       "      <td>H</td>\n",
       "      <td>501</td>\n",
       "      <td>blau</td>\n",
       "      <td>3</td>\n",
       "      <td>16. Jun. 2010</td>\n",
       "      <td>20:02:00</td>\n",
       "      <td>ja</td>\n",
       "      <td>5.9</td>\n",
       "      <td>2</td>\n",
       "      <td>mittel</td>\n",
       "      <td>1135</td>\n",
       "      <td>1</td>\n",
       "      <td>3</td>\n",
       "      <td>9.38</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>280518935251</td>\n",
       "      <td>H</td>\n",
       "      <td>501</td>\n",
       "      <td>schwarz</td>\n",
       "      <td>7</td>\n",
       "      <td>16. Jun. 2010</td>\n",
       "      <td>18:53:00</td>\n",
       "      <td>ja</td>\n",
       "      <td>2.5</td>\n",
       "      <td>3</td>\n",
       "      <td>mittel</td>\n",
       "      <td>96</td>\n",
       "      <td>1</td>\n",
       "      <td>17</td>\n",
       "      <td>32.50</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>280518934804</td>\n",
       "      <td>H</td>\n",
       "      <td>501</td>\n",
       "      <td>schwarz</td>\n",
       "      <td>7</td>\n",
       "      <td>16. Jun. 2010</td>\n",
       "      <td>18:51:00</td>\n",
       "      <td>ja</td>\n",
       "      <td>2.5</td>\n",
       "      <td>3</td>\n",
       "      <td>mittel</td>\n",
       "      <td>96</td>\n",
       "      <td>1</td>\n",
       "      <td>14</td>\n",
       "      <td>45.50</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>200481480867</td>\n",
       "      <td>H</td>\n",
       "      <td>501</td>\n",
       "      <td>schwarz</td>\n",
       "      <td>7</td>\n",
       "      <td>16. Jun. 2010</td>\n",
       "      <td>10:23:00</td>\n",
       "      <td>ja</td>\n",
       "      <td>3.9</td>\n",
       "      <td>3</td>\n",
       "      <td>mittel</td>\n",
       "      <td>96</td>\n",
       "      <td>1</td>\n",
       "      <td>11</td>\n",
       "      <td>24.17</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>270591000150</td>\n",
       "      <td>H</td>\n",
       "      <td>501</td>\n",
       "      <td>beige</td>\n",
       "      <td>7</td>\n",
       "      <td>15. Jun. 2010</td>\n",
       "      <td>21:21:00</td>\n",
       "      <td>ja</td>\n",
       "      <td>2.2</td>\n",
       "      <td>2</td>\n",
       "      <td>mittel</td>\n",
       "      <td>201</td>\n",
       "      <td>1</td>\n",
       "      <td>12</td>\n",
       "      <td>51.01</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>220619465293</td>\n",
       "      <td>H</td>\n",
       "      <td>501</td>\n",
       "      <td>blau</td>\n",
       "      <td>5</td>\n",
       "      <td>14. Jun. 2010</td>\n",
       "      <td>22:40:00</td>\n",
       "      <td>ja</td>\n",
       "      <td>5</td>\n",
       "      <td>1</td>\n",
       "      <td>mittel</td>\n",
       "      <td>633</td>\n",
       "      <td>1</td>\n",
       "      <td>18</td>\n",
       "      <td>31.50</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>220616885070</td>\n",
       "      <td>H</td>\n",
       "      <td>501</td>\n",
       "      <td>blau</td>\n",
       "      <td>10</td>\n",
       "      <td>14. Jun. 2010</td>\n",
       "      <td>21:08:00</td>\n",
       "      <td>ja</td>\n",
       "      <td>4</td>\n",
       "      <td>1</td>\n",
       "      <td>mittel</td>\n",
       "      <td>24</td>\n",
       "      <td>1</td>\n",
       "      <td>9</td>\n",
       "      <td>31.61</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>300435262351</td>\n",
       "      <td>H</td>\n",
       "      <td>501</td>\n",
       "      <td>blau</td>\n",
       "      <td>7</td>\n",
       "      <td>14. Jun. 2010</td>\n",
       "      <td>20:10:00</td>\n",
       "      <td>ja</td>\n",
       "      <td>2.5</td>\n",
       "      <td>2</td>\n",
       "      <td>mittel</td>\n",
       "      <td>181</td>\n",
       "      <td>0.968</td>\n",
       "      <td>5</td>\n",
       "      <td>6.16</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "             Nr D/H  Sorte    Farbe  Aktions-\\ndauer   A.ende-datum  \\\n",
       "0  330443001836   H    501     blau                3  17. Jun. 2010   \n",
       "1  220619468373   H    501     blau                7  16. Jun. 2010   \n",
       "2  150455004183   H    501     blau                3  16. Jun. 2010   \n",
       "3  280518935251   H    501  schwarz                7  16. Jun. 2010   \n",
       "4  280518934804   H    501  schwarz                7  16. Jun. 2010   \n",
       "5  200481480867   H    501  schwarz                7  16. Jun. 2010   \n",
       "6  270591000150   H    501    beige                7  15. Jun. 2010   \n",
       "7  220619465293   H    501     blau                5  14. Jun. 2010   \n",
       "8  220616885070   H    501     blau               10  14. Jun. 2010   \n",
       "9  300435262351   H    501     blau                7  14. Jun. 2010   \n",
       "\n",
       "  A-ende-Uhrzeit Startpreis=1? Versandkosten  Anzahl Bilder Bildqualität  \\\n",
       "0       08:29:00            ja           6.3              1       mittel   \n",
       "1       22:40:00            ja             5              1       mittel   \n",
       "2       20:02:00            ja           5.9              2       mittel   \n",
       "3       18:53:00            ja           2.5              3       mittel   \n",
       "4       18:51:00            ja           2.5              3       mittel   \n",
       "5       10:23:00            ja           3.9              3       mittel   \n",
       "6       21:21:00            ja           2.2              2       mittel   \n",
       "7       22:40:00            ja             5              1       mittel   \n",
       "8       21:08:00            ja             4              1       mittel   \n",
       "9       20:10:00            ja           2.5              2       mittel   \n",
       "\n",
       "   Anbieterbewertung\\nAnzahl Anbieter-PosBew.  Anzahl Gebote  Erzielter Preis  \n",
       "0                        223                1             12            26.20  \n",
       "1                        633                1             15            35.66  \n",
       "2                       1135                1              3             9.38  \n",
       "3                         96                1             17            32.50  \n",
       "4                         96                1             14            45.50  \n",
       "5                         96                1             11            24.17  \n",
       "6                        201                1             12            51.01  \n",
       "7                        633                1             18            31.50  \n",
       "8                         24                1              9            31.61  \n",
       "9                        181            0.968              5             6.16  "
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Reload the data, skipping the first two rows and using row 3 as headers\n",
    "df = pd.read_excel('/kaggle/input/inf502-data/ebay-Auktionsdaten-orig-Ausschnitt-.xls', \n",
    "                   skiprows=2)  # Skip the first row\n",
    "\n",
    "# Display basic info\n",
    "print(\"Dataset reloaded with correct headers!\")\n",
    "print(f\"Shape: {df.shape[0]} rows, {df.shape[1]} columns\")\n",
    "print(\"\\n\" + \"=\"*50)\n",
    "print(\"\\nColumn names:\")\n",
    "print(df.columns.tolist())\n",
    "print(\"\\n\" + \"=\"*50)\n",
    "df.head(10)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "a8a05397",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:11.827938Z",
     "iopub.status.busy": "2025-12-22T10:51:11.827420Z",
     "iopub.status.idle": "2025-12-22T10:51:11.852581Z",
     "shell.execute_reply": "2025-12-22T10:51:11.851442Z"
    },
    "papermill": {
     "duration": 0.032104,
     "end_time": "2025-12-22T10:51:11.854472",
     "exception": false,
     "start_time": "2025-12-22T10:51:11.822368",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "============================================================\n",
      "DATASET INFORMATION\n",
      "============================================================\n",
      "<class 'pandas.core.frame.DataFrame'>\n",
      "RangeIndex: 994 entries, 0 to 993\n",
      "Data columns (total 15 columns):\n",
      " #   Column                    Non-Null Count  Dtype  \n",
      "---  ------                    --------------  -----  \n",
      " 0   Nr                        994 non-null    int64  \n",
      " 1   D/H                       994 non-null    object \n",
      " 2   Sorte                     994 non-null    int64  \n",
      " 3   Farbe                     994 non-null    object \n",
      " 4   Aktions-\n",
      "dauer            994 non-null    int64  \n",
      " 5   A.ende-datum              994 non-null    object \n",
      " 6   A-ende-Uhrzeit            994 non-null    object \n",
      " 7   Startpreis=1?             994 non-null    object \n",
      " 8   Versandkosten             994 non-null    object \n",
      " 9   Anzahl Bilder             994 non-null    int64  \n",
      " 10  Bildqualität              993 non-null    object \n",
      " 11  Anbieterbewertung\n",
      "Anzahl  994 non-null    int64  \n",
      " 12  Anbieter-PosBew.          994 non-null    object \n",
      " 13  Anzahl Gebote             994 non-null    int64  \n",
      " 14  Erzielter Preis           994 non-null    float64\n",
      "dtypes: float64(1), int64(6), object(8)\n",
      "memory usage: 116.6+ KB\n"
     ]
    }
   ],
   "source": [
    "# Get detailed info about the dataset\n",
    "print(\"=\"*60)\n",
    "print(\"DATASET INFORMATION\")\n",
    "print(\"=\"*60)\n",
    "df.info()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "c65e0f00",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:11.864929Z",
     "iopub.status.busy": "2025-12-22T10:51:11.864501Z",
     "iopub.status.idle": "2025-12-22T10:51:11.877882Z",
     "shell.execute_reply": "2025-12-22T10:51:11.876668Z"
    },
    "papermill": {
     "duration": 0.02131,
     "end_time": "2025-12-22T10:51:11.879945",
     "exception": false,
     "start_time": "2025-12-22T10:51:11.858635",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\n",
      "============================================================\n",
      "MISSING VALUES\n",
      "============================================================\n",
      "      Column  Missing Count  Missing %\n",
      "Bildqualität              1   0.100604\n"
     ]
    }
   ],
   "source": [
    "# Check missing values\n",
    "print(\"\\n\" + \"=\"*60)\n",
    "print(\"MISSING VALUES\")\n",
    "print(\"=\"*60)\n",
    "missing = df.isnull().sum()\n",
    "missing_percent = (df.isnull().sum() / len(df)) * 100\n",
    "missing_df = pd.DataFrame({\n",
    "    'Column': missing.index,\n",
    "    'Missing Count': missing.values,\n",
    "    'Missing %': missing_percent.values\n",
    "})\n",
    "missing_df = missing_df[missing_df['Missing Count'] > 0].sort_values('Missing Count', ascending=False)\n",
    "\n",
    "if len(missing_df) > 0:\n",
    "    print(missing_df.to_string(index=False))\n",
    "else:\n",
    "    print(\"No missing values found!\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "id": "21bea23d",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:11.889740Z",
     "iopub.status.busy": "2025-12-22T10:51:11.889098Z",
     "iopub.status.idle": "2025-12-22T10:51:11.899488Z",
     "shell.execute_reply": "2025-12-22T10:51:11.898431Z"
    },
    "papermill": {
     "duration": 0.017378,
     "end_time": "2025-12-22T10:51:11.901296",
     "exception": false,
     "start_time": "2025-12-22T10:51:11.883918",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "============================================================\n",
      "CATEGORICAL VARIABLES - UNIQUE VALUES\n",
      "============================================================\n",
      "\n",
      "D/H:\n",
      "  Unique count: 1\n",
      "  Values: {'H': 994}\n",
      "\n",
      "Farbe:\n",
      "  Unique count: 13\n",
      "  Values: {'blau': 864, 'schwarz': 89, 'beige': 13, 'weiß': 6, 'braun': 6, 'grau': 5, 'grün': 3, 'khaki dark': 2, 'hellblau': 2, 'khaki': 1, 'dunkelgrau': 1, 'dunkelgrün': 1, 'blau/schwarz': 1}\n",
      "\n",
      "Startpreis=1?:\n",
      "  Unique count: 50\n",
      "  Values: {'ja': 873, 'nein (25,00)': 11, 'nein (20,00)': 8, 'nein (24,99)': 6, 'nein (5,00)': 6, 'nein (20,99)': 6, 'nein (15,00)': 5, 'nein (30,00)': 5, 'nein (9,99)': 5, 'nein (29,99)': 4, 'nein (39,00)': 4, 'nein (39,99)': 4, 'nein (29,00)': 3, 'nein (25,-)': 3, 'nein (43,50)': 3, 'nein (1,99)': 3, 'nein': 3, 'nein (19,90)': 2, 'nein (9,90)': 2, 'nein (34,95)': 2, 'nein (35,00)': 2, 'nein (10,00)': 2, 'nein (49,95)': 2, 'nein (16,00)': 2, 'nein (19,99)': 2, 'nein (49,00)': 2, ' nein (20,99)': 1, 'nein (33,99)': 1, 'nein (24,00)': 1, 'nein (54,00)': 1, 'nein (30,99)': 1, 'nein (45,99)': 1, 'nein (4,99)': 1, 'nein (22,00)': 1, 'nein (39,95)': 1, 'nein (40,00)': 1, 'nein (42,50)': 1, 'nein (35,90)': 1, 'nein (42,00)': 1, 'nein (55,95)': 1, 'nein (19,00)': 1, 'nein (36,50)': 1, 'nein (45,00)': 1, 'nein (34,99)': 1, 'nein (9,95)': 1, 'nein (9,50)': 1, 'nein (9,98)': 1, 'nein (33,00)': 1, 'nein (12,-)': 1, 'nein (23,99)': 1}\n",
      "\n",
      "Bildqualität:\n",
      "  Unique count: 3\n",
      "  Values: {'mittel': 989, 'gut': 3, 'schlecht': 1}\n"
     ]
    }
   ],
   "source": [
    "# Check unique values for categorical columns\n",
    "print(\"=\"*60)\n",
    "print(\"CATEGORICAL VARIABLES - UNIQUE VALUES\")\n",
    "print(\"=\"*60)\n",
    "\n",
    "categorical_cols = ['D/H', 'Farbe', 'Startpreis=1?', 'Bildqualität']\n",
    "\n",
    "for col in categorical_cols:\n",
    "    print(f\"\\n{col}:\")\n",
    "    print(f\"  Unique count: {df[col].nunique()}\")\n",
    "    print(f\"  Values: {df[col].value_counts().to_dict()}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "3dadd5ee",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:11.911428Z",
     "iopub.status.busy": "2025-12-22T10:51:11.911116Z",
     "iopub.status.idle": "2025-12-22T10:51:11.921728Z",
     "shell.execute_reply": "2025-12-22T10:51:11.920670Z"
    },
    "papermill": {
     "duration": 0.018414,
     "end_time": "2025-12-22T10:51:11.923989",
     "exception": false,
     "start_time": "2025-12-22T10:51:11.905575",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\n",
      "============================================================\n",
      "VERSANDKOSTEN (Shipping Costs) - Sample Values\n",
      "============================================================\n",
      "Versandkosten\n",
      "3.9     144\n",
      "4       111\n",
      "4.5     104\n",
      "4.9      96\n",
      "5        85\n",
      "5.9      68\n",
      "6.9      42\n",
      "2.5      37\n",
      "4.3      35\n",
      "6        35\n",
      "4.1      34\n",
      "7        27\n",
      "0        25\n",
      "9.9      17\n",
      "4.2      12\n",
      "5.5      10\n",
      "3.5       9\n",
      "4.95      8\n",
      "4.8       8\n",
      "2         7\n",
      "Name: count, dtype: int64\n",
      "\n",
      "============================================================\n",
      "ANBIETER-POSBEW (Seller Rating %) - Sample Values\n",
      "============================================================\n",
      "Anbieter-PosBew.\n",
      "1        831\n",
      "0.991     15\n",
      "0.998     12\n",
      "0.996     11\n",
      "0          9\n",
      "0.98       8\n",
      "0.981      8\n",
      "0.985      7\n",
      "0.994      7\n",
      "0.993      5\n",
      "0.99       5\n",
      "0.984      5\n",
      "0.995      5\n",
      "0.983      5\n",
      "0.988      4\n",
      "0.989      4\n",
      "0.978      3\n",
      "0.982      3\n",
      "0.968      3\n",
      "0.975      3\n",
      "Name: count, dtype: int64\n",
      "\n",
      "============================================================\n",
      "STARTPREIS=1? - Sample Values\n",
      "============================================================\n",
      "Startpreis=1?\n",
      "ja               873\n",
      "nein (25,00)      11\n",
      "nein (20,00)       8\n",
      "nein (24,99)       6\n",
      "nein (5,00)        6\n",
      "nein (20,99)       6\n",
      "nein (15,00)       5\n",
      "nein (30,00)       5\n",
      "nein (9,99)        5\n",
      "nein (29,99)       4\n",
      "nein (39,00)       4\n",
      "nein (39,99)       4\n",
      "nein (29,00)       3\n",
      "nein (25,-)        3\n",
      "nein (43,50)       3\n",
      "nein (1,99)        3\n",
      "nein               3\n",
      "nein (19,90)       2\n",
      "nein (9,90)        2\n",
      "nein (34,95)       2\n",
      "nein (35,00)       2\n",
      "nein (10,00)       2\n",
      "nein (49,95)       2\n",
      "nein (16,00)       2\n",
      "nein (19,99)       2\n",
      "nein (49,00)       2\n",
      " nein (20,99)      1\n",
      "nein (33,99)       1\n",
      "nein (24,00)       1\n",
      "nein (54,00)       1\n",
      "nein (30,99)       1\n",
      "nein (45,99)       1\n",
      "nein (4,99)        1\n",
      "nein (22,00)       1\n",
      "nein (39,95)       1\n",
      "nein (40,00)       1\n",
      "nein (42,50)       1\n",
      "nein (35,90)       1\n",
      "nein (42,00)       1\n",
      "nein (55,95)       1\n",
      "nein (19,00)       1\n",
      "nein (36,50)       1\n",
      "nein (45,00)       1\n",
      "nein (34,99)       1\n",
      "nein (9,95)        1\n",
      "nein (9,50)        1\n",
      "nein (9,98)        1\n",
      "nein (33,00)       1\n",
      "nein (12,-)        1\n",
      "nein (23,99)       1\n",
      "Name: count, dtype: int64\n"
     ]
    }
   ],
   "source": [
    "# Check Versandkosten (should be numeric but is object type)\n",
    "print(\"\\n\" + \"=\"*60)\n",
    "print(\"VERSANDKOSTEN (Shipping Costs) - Sample Values\")\n",
    "print(\"=\"*60)\n",
    "print(df['Versandkosten'].value_counts().head(20))\n",
    "\n",
    "# Check Anbieter-PosBew (should be numeric but is object type)\n",
    "print(\"\\n\" + \"=\"*60)\n",
    "print(\"ANBIETER-POSBEW (Seller Rating %) - Sample Values\")\n",
    "print(\"=\"*60)\n",
    "print(df['Anbieter-PosBew.'].value_counts().head(20))\n",
    "\n",
    "# Check Startpreis=1? column in detail\n",
    "print(\"\\n\" + \"=\"*60)\n",
    "print(\"STARTPREIS=1? - Sample Values\")\n",
    "print(\"=\"*60)\n",
    "print(df['Startpreis=1?'].value_counts())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "64fa49f0",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:11.934109Z",
     "iopub.status.busy": "2025-12-22T10:51:11.933725Z",
     "iopub.status.idle": "2025-12-22T10:51:11.957180Z",
     "shell.execute_reply": "2025-12-22T10:51:11.955943Z"
    },
    "papermill": {
     "duration": 0.031216,
     "end_time": "2025-12-22T10:51:11.959495",
     "exception": false,
     "start_time": "2025-12-22T10:51:11.928279",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "============================================================\n",
      "NUMERICAL VARIABLES - STATISTICS\n",
      "============================================================\n",
      "                 Nr       Sorte  Aktions-\\ndauer  Anzahl Bilder  \\\n",
      "count  9.940000e+02  994.000000       994.000000     994.000000   \n",
      "mean   2.199912e+11  501.003018         7.216298       1.980885   \n",
      "std    7.020609e+10    0.054882         2.044445       1.415152   \n",
      "min    1.104535e+11  501.000000         1.000000       0.000000   \n",
      "25%    1.603744e+11  501.000000         7.000000       1.000000   \n",
      "50%    2.205521e+11  501.000000         7.000000       1.000000   \n",
      "75%    2.705278e+11  501.000000        10.000000       3.000000   \n",
      "max    4.001149e+11  502.000000        10.000000      11.000000   \n",
      "\n",
      "       Anbieterbewertung\\nAnzahl  Anzahl Gebote  Erzielter Preis  \n",
      "count                 994.000000     994.000000       994.000000  \n",
      "mean                  284.701207       9.219316        31.805594  \n",
      "std                   465.287606       5.143675        12.407878  \n",
      "min                     0.000000       1.000000         1.000000  \n",
      "25%                    55.000000       5.000000        24.605000  \n",
      "50%                   139.000000       9.000000        33.490000  \n",
      "75%                   332.000000      12.000000        40.500000  \n",
      "max                  6511.000000      30.000000        68.700000  \n"
     ]
    }
   ],
   "source": [
    "# Statistical summary\n",
    "print(\"=\"*60)\n",
    "print(\"NUMERICAL VARIABLES - STATISTICS\")\n",
    "print(\"=\"*60)\n",
    "print(df.describe())"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "573d27a9",
   "metadata": {
    "papermill": {
     "duration": 0.004919,
     "end_time": "2025-12-22T10:51:11.968902",
     "exception": false,
     "start_time": "2025-12-22T10:51:11.963983",
     "status": "completed"
    },
    "tags": []
   },
   "source": [
    "# eBay Auction Data Analysis - Levi's 501 Jeans\n",
    "\n",
    "## Dataset Overview\n",
    "- **Rows:** 994 auctions\n",
    "- **Columns:** 15 attributes\n",
    "- **Product:** Levi's 501 Jeans (Men's)\n",
    "- **Time Period:** June 2010\n",
    "\n",
    "---\n",
    "\n",
    "## Part (a): Attribute Usability Analysis\n",
    "\n",
    "### ✅ USABLE Attributes (8 features available at auction START)\n",
    "\n",
    "1. **Farbe (Color)** - Categorical\n",
    "   - 13 unique colors: blau (864), schwarz (89), beige (13), etc.\n",
    "   - Good predictor: color affects price\n",
    "   \n",
    "2. **Aktions-dauer (Auction Duration)** - Numerical\n",
    "   - Values: 1, 3, 5, 7, 10 days\n",
    "   - Longer auctions may attract more bids\n",
    "   \n",
    "3. **Startpreis (Starting Price)** - Numerical (needs extraction)\n",
    "   - 873 auctions start at 1€\n",
    "   - 121 auctions have higher starting prices (1.99€ - 55.95€)\n",
    "   - Critical predictor of final price\n",
    "   \n",
    "4. **Versandkosten (Shipping Costs)** - Numerical (needs cleaning)\n",
    "   - Range: 0€ - 9.9€\n",
    "   - Affects buyer decisions\n",
    "   \n",
    "5. **Anzahl Bilder (Number of Images)** - Numerical\n",
    "   - Range: 0 - 11 images\n",
    "   - More images = better presentation\n",
    "   \n",
    "6. **Bildqualität (Image Quality)** - Categorical\n",
    "   - Values: mittel (989), gut (3), schlecht (1)\n",
    "   - 1 missing value (0.1%)\n",
    "   \n",
    "7. **Anbieterbewertung Anzahl (Seller Rating Count)** - Numerical\n",
    "   - Range: 0 - 6511 ratings\n",
    "   - Seller reputation indicator\n",
    "   \n",
    "8. **Anbieter-PosBew (Seller Positive Rating %)** - Numerical (needs cleaning)\n",
    "   - Range: 0 - 1.0 (0% - 100%)\n",
    "   - High ratings = more trust\n",
    "\n",
    "### ❌ NOT USABLE Attributes (7 features)\n",
    "\n",
    "1. **Nr** - Auction ID (no predictive value)\n",
    "2. **D/H** - All values = \"H\" (no variation)\n",
    "3. **Sorte** - All values = 501 (no variation, except 1 typo)\n",
    "4. **A.ende-datum** - Auction end date (not available at START)\n",
    "5. **A-ende-Uhrzeit** - Auction end time (not available at START)\n",
    "6. **Anzahl Gebote** - Number of bids (happens DURING auction, not at start)\n",
    "7. **Erzielter Preis** - Final price (**TARGET variable** - what we predict!)\n",
    "\n",
    "---\n",
    "\n",
    "## Part (b): ML Objectives & Models\n",
    "\n",
    "### Prediction Goal\n",
    "**Predict the final auction price (Erzielter Preis) at the moment the auction starts**\n",
    "\n",
    "### Target Variable\n",
    "- **Erzielter Preis (Achieved Price)**\n",
    "- Range: 1€ - 68.70€\n",
    "- Mean: 31.81€\n",
    "- Median: 33.49€\n",
    "- This is a **regression problem**\n",
    "\n",
    "### Suitable ML Models\n",
    "\n",
    "1. **Linear Regression**\n",
    "   - Simple baseline model\n",
    "   - Assumes linear relationship between features and price\n",
    "   - Good for interpretation\n",
    "   \n",
    "2. **Decision Tree Regression**\n",
    "   - Handles non-linear patterns\n",
    "   - Easy to visualize and interpret\n",
    "   - Can overfit if not tuned\n",
    "   \n",
    "3. **Random Forest Regression**\n",
    "   - Ensemble of decision trees\n",
    "   - Reduces overfitting\n",
    "   - Handles feature interactions well\n",
    "   \n",
    "4. **Gradient Boosting (XGBoost/LightGBM)**\n",
    "   - State-of-the-art performance\n",
    "   - Great for tabular data\n",
    "   - Best expected results\n",
    "\n",
    "5. **Neural Networks (MLP)**\n",
    "   - Can capture complex patterns\n",
    "   - May be overkill for small dataset\n",
    "   - Requires more data preprocessing\n",
    "\n",
    "**Recommendation:** Start with Linear Regression (baseline) → Random Forest → Gradient Boosting\n",
    "\n",
    "---\n",
    "\n",
    "## Data Quality Issues to Address\n",
    "\n",
    "1. **Missing Values:** 1 missing in Bildqualität (0.1%)\n",
    "2. **Data Type Issues:**\n",
    "   - Versandkosten stored as text → convert to float\n",
    "   - Anbieter-PosBew stored as text → convert to float\n",
    "3. **Feature Engineering:**\n",
    "   - Extract actual starting price from \"Startpreis=1?\" column\n",
    "4. **Outliers:** Check for extreme values in price/shipping"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "id": "17f2e4fd",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:11.979680Z",
     "iopub.status.busy": "2025-12-22T10:51:11.979025Z",
     "iopub.status.idle": "2025-12-22T10:51:11.985149Z",
     "shell.execute_reply": "2025-12-22T10:51:11.984399Z"
    },
    "papermill": {
     "duration": 0.014191,
     "end_time": "2025-12-22T10:51:11.987529",
     "exception": false,
     "start_time": "2025-12-22T10:51:11.973338",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "============================================================\n",
      "DATA CLEANING - STEP 1: CREATE CLEAN COPY\n",
      "============================================================\n",
      "Original shape: (994, 15)\n",
      "Clean copy created: (994, 15)\n",
      "\n",
      "Starting cleaning process...\n"
     ]
    }
   ],
   "source": [
    "# Create a copy for cleaning\n",
    "df_clean = df.copy()\n",
    "\n",
    "print(\"=\"*60)\n",
    "print(\"DATA CLEANING - STEP 1: CREATE CLEAN COPY\")\n",
    "print(\"=\"*60)\n",
    "print(f\"Original shape: {df.shape}\")\n",
    "print(f\"Clean copy created: {df_clean.shape}\")\n",
    "print(\"\\nStarting cleaning process...\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "id": "950500f0",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:11.998745Z",
     "iopub.status.busy": "2025-12-22T10:51:11.998436Z",
     "iopub.status.idle": "2025-12-22T10:51:12.018189Z",
     "shell.execute_reply": "2025-12-22T10:51:12.017420Z"
    },
    "papermill": {
     "duration": 0.028302,
     "end_time": "2025-12-22T10:51:12.020450",
     "exception": false,
     "start_time": "2025-12-22T10:51:11.992148",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "============================================================\n",
      "CLEANING STEP 2: EXTRACT STARTING PRICE\n",
      "============================================================\n",
      "\n",
      "Starting Price Extraction Results:\n",
      "New column 'Startpreis' created\n",
      "\n",
      "Statistics:\n",
      "count    994.000000\n",
      "mean       3.865956\n",
      "std        8.919833\n",
      "min        1.000000\n",
      "25%        1.000000\n",
      "50%        1.000000\n",
      "75%        1.000000\n",
      "max       55.950000\n",
      "Name: Startpreis, dtype: float64\n",
      "\n",
      "Sample values:\n",
      "   Startpreis=1?  Startpreis\n",
      "0             ja         1.0\n",
      "1             ja         1.0\n",
      "2             ja         1.0\n",
      "3             ja         1.0\n",
      "4             ja         1.0\n",
      "5             ja         1.0\n",
      "6             ja         1.0\n",
      "7             ja         1.0\n",
      "8             ja         1.0\n",
      "9             ja         1.0\n",
      "10            ja         1.0\n",
      "11            ja         1.0\n",
      "12  nein (20,00)        20.0\n",
      "13            ja         1.0\n",
      "14            ja         1.0\n",
      "15            ja         1.0\n",
      "16            ja         1.0\n",
      "17   nein (9,90)         9.9\n",
      "18            ja         1.0\n",
      "19            ja         1.0\n"
     ]
    }
   ],
   "source": [
    "import re\n",
    "\n",
    "print(\"=\"*60)\n",
    "print(\"CLEANING STEP 2: EXTRACT STARTING PRICE\")\n",
    "print(\"=\"*60)\n",
    "\n",
    "def extract_starting_price(value):\n",
    "    \"\"\"\n",
    "    Extract starting price from 'Startpreis=1?' column\n",
    "    - 'ja' → 1.0\n",
    "    - 'nein (XX,XX)' → extract the number\n",
    "    - 'nein' → assume 1.0 (if no price given)\n",
    "    \"\"\"\n",
    "    if pd.isna(value):\n",
    "        return 1.0\n",
    "    \n",
    "    value = str(value).strip()\n",
    "    \n",
    "    if value == 'ja':\n",
    "        return 1.0\n",
    "    elif 'nein' in value.lower():\n",
    "        # Extract number from parentheses like \"nein (25,00)\"\n",
    "        match = re.search(r'\\(([0-9]+[,\\.]?[0-9]*)', value)\n",
    "        if match:\n",
    "            price_str = match.group(1)\n",
    "            # Replace comma with dot for German number format\n",
    "            price_str = price_str.replace(',', '.').replace('-', '')\n",
    "            try:\n",
    "                return float(price_str)\n",
    "            except:\n",
    "                return 1.0\n",
    "        else:\n",
    "            return 1.0\n",
    "    else:\n",
    "        return 1.0\n",
    "\n",
    "# Apply the function\n",
    "df_clean['Startpreis'] = df_clean['Startpreis=1?'].apply(extract_starting_price)\n",
    "\n",
    "# Verify the extraction\n",
    "print(\"\\nStarting Price Extraction Results:\")\n",
    "print(f\"New column 'Startpreis' created\")\n",
    "print(f\"\\nStatistics:\")\n",
    "print(df_clean['Startpreis'].describe())\n",
    "print(f\"\\nSample values:\")\n",
    "print(df_clean[['Startpreis=1?', 'Startpreis']].head(20))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "id": "b3d19b31",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:12.031939Z",
     "iopub.status.busy": "2025-12-22T10:51:12.031549Z",
     "iopub.status.idle": "2025-12-22T10:51:12.047724Z",
     "shell.execute_reply": "2025-12-22T10:51:12.046872Z"
    },
    "papermill": {
     "duration": 0.024993,
     "end_time": "2025-12-22T10:51:12.050207",
     "exception": false,
     "start_time": "2025-12-22T10:51:12.025214",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "============================================================\n",
      "CLEANING STEP 3: CLEAN SHIPPING COSTS\n",
      "============================================================\n",
      "\n",
      "Shipping Costs Cleaning Results:\n",
      "New column 'Versandkosten_clean' created\n",
      "\n",
      "Statistics:\n",
      "count    994.000000\n",
      "mean       4.690322\n",
      "std        1.581289\n",
      "min        0.000000\n",
      "25%        3.900000\n",
      "50%        4.500000\n",
      "75%        5.000000\n",
      "max       12.500000\n",
      "Name: Versandkosten_clean, dtype: float64\n",
      "\n",
      "Sample comparison:\n",
      "   Versandkosten  Versandkosten_clean\n",
      "0            6.3                  6.3\n",
      "1              5                  5.0\n",
      "2            5.9                  5.9\n",
      "3            2.5                  2.5\n",
      "4            2.5                  2.5\n",
      "5            3.9                  3.9\n",
      "6            2.2                  2.2\n",
      "7              5                  5.0\n",
      "8              4                  4.0\n",
      "9            2.5                  2.5\n",
      "10             5                  5.0\n",
      "11           3.9                  3.9\n",
      "12            10                 10.0\n",
      "13           4.5                  4.5\n",
      "14           4.5                  4.5\n",
      "\n",
      "Unique values check:\n",
      "Original unique count: 55\n",
      "Cleaned unique count: 54\n"
     ]
    }
   ],
   "source": [
    "print(\"=\"*60)\n",
    "print(\"CLEANING STEP 3: CLEAN SHIPPING COSTS\")\n",
    "print(\"=\"*60)\n",
    "\n",
    "def clean_versandkosten(value):\n",
    "    \"\"\"\n",
    "    Convert shipping costs to float\n",
    "    Handle German number format (comma as decimal separator)\n",
    "    \"\"\"\n",
    "    if pd.isna(value):\n",
    "        return 0.0\n",
    "    \n",
    "    value = str(value).strip()\n",
    "    # Remove € symbol if present\n",
    "    value = value.replace('€', '').replace(' ', '')\n",
    "    # Replace comma with dot\n",
    "    value = value.replace(',', '.')\n",
    "    \n",
    "    try:\n",
    "        return float(value)\n",
    "    except:\n",
    "        return 0.0\n",
    "\n",
    "# Apply the function\n",
    "df_clean['Versandkosten_clean'] = df_clean['Versandkosten'].apply(clean_versandkosten)\n",
    "\n",
    "# Verify\n",
    "print(\"\\nShipping Costs Cleaning Results:\")\n",
    "print(f\"New column 'Versandkosten_clean' created\")\n",
    "print(f\"\\nStatistics:\")\n",
    "print(df_clean['Versandkosten_clean'].describe())\n",
    "print(f\"\\nSample comparison:\")\n",
    "print(df_clean[['Versandkosten', 'Versandkosten_clean']].head(15))\n",
    "print(f\"\\nUnique values check:\")\n",
    "print(f\"Original unique count: {df_clean['Versandkosten'].nunique()}\")\n",
    "print(f\"Cleaned unique count: {df_clean['Versandkosten_clean'].nunique()}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "id": "a3117c60",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:12.061845Z",
     "iopub.status.busy": "2025-12-22T10:51:12.061050Z",
     "iopub.status.idle": "2025-12-22T10:51:12.076168Z",
     "shell.execute_reply": "2025-12-22T10:51:12.075147Z"
    },
    "papermill": {
     "duration": 0.023646,
     "end_time": "2025-12-22T10:51:12.078584",
     "exception": false,
     "start_time": "2025-12-22T10:51:12.054938",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "============================================================\n",
      "CLEANING STEP 4: CLEAN SELLER POSITIVE RATING %\n",
      "============================================================\n",
      "\n",
      "Seller Rating Cleaning Results:\n",
      "New column 'Anbieter_PosBew_clean' created\n",
      "\n",
      "Statistics:\n",
      "count    994.000000\n",
      "mean       0.987283\n",
      "std        0.095810\n",
      "min        0.000000\n",
      "25%        1.000000\n",
      "50%        1.000000\n",
      "75%        1.000000\n",
      "max        1.000000\n",
      "Name: Anbieter_PosBew_clean, dtype: float64\n",
      "\n",
      "Sample comparison:\n",
      "   Anbieter-PosBew.  Anbieter_PosBew_clean\n",
      "0                 1                  1.000\n",
      "1                 1                  1.000\n",
      "2                 1                  1.000\n",
      "3                 1                  1.000\n",
      "4                 1                  1.000\n",
      "5                 1                  1.000\n",
      "6                 1                  1.000\n",
      "7                 1                  1.000\n",
      "8                 1                  1.000\n",
      "9             0.968                  0.968\n",
      "10                1                  1.000\n",
      "11                1                  1.000\n",
      "12            0.946                  0.946\n",
      "13             0.96                  0.960\n",
      "14             0.96                  0.960\n"
     ]
    }
   ],
   "source": [
    "print(\"=\"*60)\n",
    "print(\"CLEANING STEP 4: CLEAN SELLER POSITIVE RATING %\")\n",
    "print(\"=\"*60)\n",
    "\n",
    "def clean_seller_rating(value):\n",
    "    \"\"\"\n",
    "    Convert seller positive rating to float\n",
    "    Handle both decimal (0.991) and integer (1) formats\n",
    "    \"\"\"\n",
    "    if pd.isna(value):\n",
    "        return 1.0\n",
    "    \n",
    "    value = str(value).strip()\n",
    "    # Remove % symbol if present\n",
    "    value = value.replace('%', '').replace(' ', '')\n",
    "    # Replace comma with dot\n",
    "    value = value.replace(',', '.')\n",
    "    \n",
    "    try:\n",
    "        return float(value)\n",
    "    except:\n",
    "        return 1.0\n",
    "\n",
    "# Apply the function\n",
    "df_clean['Anbieter_PosBew_clean'] = df_clean['Anbieter-PosBew.'].apply(clean_seller_rating)\n",
    "\n",
    "# Verify\n",
    "print(\"\\nSeller Rating Cleaning Results:\")\n",
    "print(f\"New column 'Anbieter_PosBew_clean' created\")\n",
    "print(f\"\\nStatistics:\")\n",
    "print(df_clean['Anbieter_PosBew_clean'].describe())\n",
    "print(f\"\\nSample comparison:\")\n",
    "print(df_clean[['Anbieter-PosBew.', 'Anbieter_PosBew_clean']].head(15))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "id": "df45a828",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:12.089207Z",
     "iopub.status.busy": "2025-12-22T10:51:12.088914Z",
     "iopub.status.idle": "2025-12-22T10:51:12.099856Z",
     "shell.execute_reply": "2025-12-22T10:51:12.098877Z"
    },
    "papermill": {
     "duration": 0.018551,
     "end_time": "2025-12-22T10:51:12.101902",
     "exception": false,
     "start_time": "2025-12-22T10:51:12.083351",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "============================================================\n",
      "CLEANING STEP 5: HANDLE MISSING VALUE IN IMAGE QUALITY\n",
      "============================================================\n",
      "Missing values before: 1\n",
      "Missing values after: 0\n",
      "Filled with mode: 'mittel'\n",
      "\n",
      "Final distribution:\n",
      "Bildqualität\n",
      "mittel      990\n",
      "gut           3\n",
      "schlecht      1\n",
      "Name: count, dtype: int64\n"
     ]
    }
   ],
   "source": [
    "print(\"=\"*60)\n",
    "print(\"CLEANING STEP 5: HANDLE MISSING VALUE IN IMAGE QUALITY\")\n",
    "print(\"=\"*60)\n",
    "\n",
    "# Check missing value\n",
    "print(f\"Missing values before: {df_clean['Bildqualität'].isnull().sum()}\")\n",
    "\n",
    "# Fill missing with most common value (mode)\n",
    "mode_value = df_clean['Bildqualität'].mode()[0]\n",
    "df_clean['Bildqualität'] = df_clean['Bildqualität'].fillna(mode_value)\n",
    "\n",
    "print(f\"Missing values after: {df_clean['Bildqualität'].isnull().sum()}\")\n",
    "print(f\"Filled with mode: '{mode_value}'\")\n",
    "print(f\"\\nFinal distribution:\")\n",
    "print(df_clean['Bildqualität'].value_counts())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "id": "83f10992",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:12.113560Z",
     "iopub.status.busy": "2025-12-22T10:51:12.112604Z",
     "iopub.status.idle": "2025-12-22T10:51:12.119961Z",
     "shell.execute_reply": "2025-12-22T10:51:12.118979Z"
    },
    "papermill": {
     "duration": 0.015457,
     "end_time": "2025-12-22T10:51:12.122098",
     "exception": false,
     "start_time": "2025-12-22T10:51:12.106641",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "============================================================\n",
      "CLEANING STEP 6: RENAME COLUMNS FOR CLARITY\n",
      "============================================================\n",
      "Columns renamed successfully!\n",
      "\n",
      "All column names:\n",
      " 1. Nr\n",
      " 2. D/H\n",
      " 3. Sorte\n",
      " 4. Farbe\n",
      " 5. Aktionsdauer\n",
      " 6. A.ende-datum\n",
      " 7. A-ende-Uhrzeit\n",
      " 8. Startpreis=1?\n",
      " 9. Versandkosten\n",
      "10. Anzahl Bilder\n",
      "11. Bildqualität\n",
      "12. Anbieterbewertung_Anzahl\n",
      "13. Anbieter_PosBew\n",
      "14. Anzahl Gebote\n",
      "15. Erzielter Preis\n",
      "16. Startpreis\n",
      "17. Versandkosten_clean\n",
      "18. Anbieter_PosBew_clean\n"
     ]
    }
   ],
   "source": [
    "print(\"=\"*60)\n",
    "print(\"CLEANING STEP 6: RENAME COLUMNS FOR CLARITY\")\n",
    "print(\"=\"*60)\n",
    "\n",
    "# Rename columns to clean names (remove newlines, special characters)\n",
    "column_mapping = {\n",
    "    'Aktions-\\ndauer': 'Aktionsdauer',\n",
    "    'Anbieterbewertung\\nAnzahl': 'Anbieterbewertung_Anzahl',\n",
    "    'Anbieter-PosBew.': 'Anbieter_PosBew'\n",
    "}\n",
    "\n",
    "df_clean.rename(columns=column_mapping, inplace=True)\n",
    "\n",
    "print(\"Columns renamed successfully!\")\n",
    "print(\"\\nAll column names:\")\n",
    "for i, col in enumerate(df_clean.columns, 1):\n",
    "    print(f\"{i:2}. {col}\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "id": "4514ee86",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:12.138232Z",
     "iopub.status.busy": "2025-12-22T10:51:12.137914Z",
     "iopub.status.idle": "2025-12-22T10:51:12.154267Z",
     "shell.execute_reply": "2025-12-22T10:51:12.153176Z"
    },
    "papermill": {
     "duration": 0.027387,
     "end_time": "2025-12-22T10:51:12.156567",
     "exception": false,
     "start_time": "2025-12-22T10:51:12.129180",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "============================================================\n",
      "CLEANING STEP 7: CREATE FINAL MINING TABLE\n",
      "============================================================\n",
      "Mining table created!\n",
      "Shape: (994, 9)\n",
      "\n",
      "Columns in mining table:\n",
      "1. Color\n",
      "2. Auction_Duration_Days\n",
      "3. Starting_Price_EUR\n",
      "4. Shipping_Cost_EUR\n",
      "5. Number_of_Images\n",
      "6. Image_Quality\n",
      "7. Seller_Rating_Count\n",
      "8. Seller_Positive_Percent\n",
      "9. Final_Price_EUR\n",
      "\n",
      "============================================================\n",
      "First 10 rows of mining table:\n",
      "============================================================\n",
      "     Color  Auction_Duration_Days  Starting_Price_EUR  Shipping_Cost_EUR  \\\n",
      "0     blau                      3                 1.0                6.3   \n",
      "1     blau                      7                 1.0                5.0   \n",
      "2     blau                      3                 1.0                5.9   \n",
      "3  schwarz                      7                 1.0                2.5   \n",
      "4  schwarz                      7                 1.0                2.5   \n",
      "5  schwarz                      7                 1.0                3.9   \n",
      "6    beige                      7                 1.0                2.2   \n",
      "7     blau                      5                 1.0                5.0   \n",
      "8     blau                     10                 1.0                4.0   \n",
      "9     blau                      7                 1.0                2.5   \n",
      "\n",
      "   Number_of_Images Image_Quality  Seller_Rating_Count  \\\n",
      "0                 1        mittel                  223   \n",
      "1                 1        mittel                  633   \n",
      "2                 2        mittel                 1135   \n",
      "3                 3        mittel                   96   \n",
      "4                 3        mittel                   96   \n",
      "5                 3        mittel                   96   \n",
      "6                 2        mittel                  201   \n",
      "7                 1        mittel                  633   \n",
      "8                 1        mittel                   24   \n",
      "9                 2        mittel                  181   \n",
      "\n",
      "   Seller_Positive_Percent  Final_Price_EUR  \n",
      "0                    1.000            26.20  \n",
      "1                    1.000            35.66  \n",
      "2                    1.000             9.38  \n",
      "3                    1.000            32.50  \n",
      "4                    1.000            45.50  \n",
      "5                    1.000            24.17  \n",
      "6                    1.000            51.01  \n",
      "7                    1.000            31.50  \n",
      "8                    1.000            31.61  \n",
      "9                    0.968             6.16  \n"
     ]
    }
   ],
   "source": [
    "print(\"=\"*60)\n",
    "print(\"CLEANING STEP 7: CREATE FINAL MINING TABLE\")\n",
    "print(\"=\"*60)\n",
    "\n",
    "# Select only relevant columns for ML (available at auction START)\n",
    "mining_columns = [\n",
    "    'Farbe',                        # Color\n",
    "    'Aktionsdauer',                 # Auction duration\n",
    "    'Startpreis',                   # Starting price (cleaned)\n",
    "    'Versandkosten_clean',          # Shipping costs (cleaned)\n",
    "    'Anzahl Bilder',                # Number of images\n",
    "    'Bildqualität',                 # Image quality\n",
    "    'Anbieterbewertung_Anzahl',     # Seller rating count\n",
    "    'Anbieter_PosBew_clean',        # Seller positive % (cleaned)\n",
    "    'Erzielter Preis'               # TARGET: Final price\n",
    "]\n",
    "\n",
    "# Create mining table\n",
    "df_mining = df_clean[mining_columns].copy()\n",
    "\n",
    "# Rename columns to English for better readability in AI Studio\n",
    "df_mining.columns = [\n",
    "    'Color',\n",
    "    'Auction_Duration_Days',\n",
    "    'Starting_Price_EUR',\n",
    "    'Shipping_Cost_EUR',\n",
    "    'Number_of_Images',\n",
    "    'Image_Quality',\n",
    "    'Seller_Rating_Count',\n",
    "    'Seller_Positive_Percent',\n",
    "    'Final_Price_EUR'  # TARGET\n",
    "]\n",
    "\n",
    "print(f\"Mining table created!\")\n",
    "print(f\"Shape: {df_mining.shape}\")\n",
    "print(f\"\\nColumns in mining table:\")\n",
    "for i, col in enumerate(df_mining.columns, 1):\n",
    "    print(f\"{i}. {col}\")\n",
    "\n",
    "print(\"\\n\" + \"=\"*60)\n",
    "print(\"First 10 rows of mining table:\")\n",
    "print(\"=\"*60)\n",
    "print(df_mining.head(10))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "id": "b39bcbcd",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:12.167720Z",
     "iopub.status.busy": "2025-12-22T10:51:12.167395Z",
     "iopub.status.idle": "2025-12-22T10:51:12.194138Z",
     "shell.execute_reply": "2025-12-22T10:51:12.193083Z"
    },
    "papermill": {
     "duration": 0.035163,
     "end_time": "2025-12-22T10:51:12.196582",
     "exception": false,
     "start_time": "2025-12-22T10:51:12.161419",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "============================================================\n",
      "FINAL DATA QUALITY CHECK\n",
      "============================================================\n",
      "\n",
      "1. Missing Values:\n",
      "   ✓ No missing values!\n",
      "\n",
      "2. Data Types:\n",
      "Color                       object\n",
      "Auction_Duration_Days        int64\n",
      "Starting_Price_EUR         float64\n",
      "Shipping_Cost_EUR          float64\n",
      "Number_of_Images             int64\n",
      "Image_Quality               object\n",
      "Seller_Rating_Count          int64\n",
      "Seller_Positive_Percent    float64\n",
      "Final_Price_EUR            float64\n",
      "dtype: object\n",
      "\n",
      "3. Value Range Check:\n",
      "   Auction_Duration_Days:\n",
      "      Min: 1.00, Max: 10.00\n",
      "   Starting_Price_EUR:\n",
      "      Min: 1.00, Max: 55.95\n",
      "   Shipping_Cost_EUR:\n",
      "      Min: 0.00, Max: 12.50\n",
      "   Number_of_Images:\n",
      "      Min: 0.00, Max: 11.00\n",
      "   Seller_Rating_Count:\n",
      "      Min: 0.00, Max: 6511.00\n",
      "   Seller_Positive_Percent:\n",
      "      Min: 0.00, Max: 1.00\n",
      "   Final_Price_EUR:\n",
      "      Min: 1.00, Max: 68.70\n",
      "\n",
      "4. Summary Statistics:\n",
      "       Auction_Duration_Days  Starting_Price_EUR  Shipping_Cost_EUR  \\\n",
      "count             994.000000          994.000000         994.000000   \n",
      "mean                7.216298            3.865956           4.690322   \n",
      "std                 2.044445            8.919833           1.581289   \n",
      "min                 1.000000            1.000000           0.000000   \n",
      "25%                 7.000000            1.000000           3.900000   \n",
      "50%                 7.000000            1.000000           4.500000   \n",
      "75%                10.000000            1.000000           5.000000   \n",
      "max                10.000000           55.950000          12.500000   \n",
      "\n",
      "       Number_of_Images  Seller_Rating_Count  Seller_Positive_Percent  \\\n",
      "count        994.000000           994.000000               994.000000   \n",
      "mean           1.980885           284.701207                 0.987283   \n",
      "std            1.415152           465.287606                 0.095810   \n",
      "min            0.000000             0.000000                 0.000000   \n",
      "25%            1.000000            55.000000                 1.000000   \n",
      "50%            1.000000           139.000000                 1.000000   \n",
      "75%            3.000000           332.000000                 1.000000   \n",
      "max           11.000000          6511.000000                 1.000000   \n",
      "\n",
      "       Final_Price_EUR  \n",
      "count       994.000000  \n",
      "mean         31.805594  \n",
      "std          12.407878  \n",
      "min           1.000000  \n",
      "25%          24.605000  \n",
      "50%          33.490000  \n",
      "75%          40.500000  \n",
      "max          68.700000  \n"
     ]
    }
   ],
   "source": [
    "print(\"=\"*60)\n",
    "print(\"FINAL DATA QUALITY CHECK\")\n",
    "print(\"=\"*60)\n",
    "\n",
    "# Check for missing values\n",
    "print(\"\\n1. Missing Values:\")\n",
    "missing = df_mining.isnull().sum()\n",
    "if missing.sum() == 0:\n",
    "    print(\"   ✓ No missing values!\")\n",
    "else:\n",
    "    print(missing[missing > 0])\n",
    "\n",
    "# Check data types\n",
    "print(\"\\n2. Data Types:\")\n",
    "print(df_mining.dtypes)\n",
    "\n",
    "# Check for any infinite or negative values\n",
    "print(\"\\n3. Value Range Check:\")\n",
    "numeric_cols = df_mining.select_dtypes(include=[np.number]).columns\n",
    "for col in numeric_cols:\n",
    "    print(f\"   {col}:\")\n",
    "    print(f\"      Min: {df_mining[col].min():.2f}, Max: {df_mining[col].max():.2f}\")\n",
    "\n",
    "# Summary statistics\n",
    "print(\"\\n4. Summary Statistics:\")\n",
    "print(df_mining.describe())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "id": "8f046e1c",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-12-22T10:51:12.209388Z",
     "iopub.status.busy": "2025-12-22T10:51:12.208748Z",
     "iopub.status.idle": "2025-12-22T10:51:13.001981Z",
     "shell.execute_reply": "2025-12-22T10:51:13.000915Z"
    },
    "papermill": {
     "duration": 0.802534,
     "end_time": "2025-12-22T10:51:13.003954",
     "exception": false,
     "start_time": "2025-12-22T10:51:12.201420",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "============================================================\n",
      "SAVING MINING TABLE TO EXCEL\n",
      "============================================================\n",
      "✓ Mining table saved as: ebay_auction_mining_table.xlsx\n",
      "  Rows: 994\n",
      "  Columns: 9\n",
      "\n",
      "You can now download this file and use it in AI Studio (RapidMiner)!\n"
     ]
    }
   ],
   "source": [
    "print(\"=\"*60)\n",
    "print(\"SAVING MINING TABLE TO EXCEL\")\n",
    "print(\"=\"*60)\n",
    "\n",
    "# Save to Excel\n",
    "output_filename = 'ebay_auction_mining_table.xlsx'\n",
    "df_mining.to_excel(output_filename, index=False)\n",
    "\n",
    "print(f\"✓ Mining table saved as: {output_filename}\")\n",
    "print(f\"  Rows: {df_mining.shape[0]}\")\n",
    "print(f\"  Columns: {df_mining.shape[1]}\")\n",
    "print(f\"\\nYou can now download this file and use it in AI Studio (RapidMiner)!\")"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "c21fa3c3",
   "metadata": {
    "papermill": {
     "duration": 0.005458,
     "end_time": "2025-12-22T10:51:13.014500",
     "exception": false,
     "start_time": "2025-12-22T10:51:13.009042",
     "status": "completed"
    },
    "tags": []
   },
   "source": [
    "---\n",
    "\n",
    "## Part (c): Mining Table Creation Summary\n",
    "\n",
    "### Data Cleaning Steps Performed:\n",
    "\n",
    "1. ✅ **Extracted Starting Price** from \"Startpreis=1?\" column\n",
    "   - \"ja\" → 1.0 EUR\n",
    "   - \"nein (XX,XX)\" → extracted actual price\n",
    "   - Range: 1€ - 55.95€\n",
    "\n",
    "2. ✅ **Cleaned Shipping Costs** (Versandkosten)\n",
    "   - Converted from text to float\n",
    "   - Handled German decimal format (comma → dot)\n",
    "   - Range: 0€ - 12.50€\n",
    "\n",
    "3. ✅ **Cleaned Seller Rating Percentage** (Anbieter-PosBew)\n",
    "   - Converted from text to float (0-1 scale)\n",
    "   - Range: 0.0 - 1.0 (0% - 100%)\n",
    "\n",
    "4. ✅ **Handled Missing Value** in Image Quality\n",
    "   - 1 missing value filled with mode (\"mittel\")\n",
    "\n",
    "5. ✅ **Removed Unusable Columns**\n",
    "   - Dropped: Nr, D/H, Sorte, A.ende-datum, A-ende-Uhrzeit, Anzahl Gebote\n",
    "   - Kept only features available at auction START\n",
    "\n",
    "### Final Mining Table Structure:\n",
    "\n",
    "**Features (8):**\n",
    "- Color (categorical): 13 colors\n",
    "- Auction_Duration_Days (numerical): 1, 3, 5, 7, 10 days\n",
    "- Starting_Price_EUR (numerical): 1€ - 55.95€\n",
    "- Shipping_Cost_EUR (numerical): 0€ - 12.50€\n",
    "- Number_of_Images (numerical): 0 - 11 images\n",
    "- Image_Quality (categorical): schlecht, mittel, gut\n",
    "- Seller_Rating_Count (numerical): 0 - 6511 ratings\n",
    "- Seller_Positive_Percent (numerical): 0% - 100%\n",
    "\n",
    "**Target Variable (1):**\n",
    "- Final_Price_EUR (numerical): 1€ - 68.70€ (Mean: 31.81€, Median: 33.49€)\n",
    "\n",
    "### Data Quality:\n",
    "- ✓ 994 complete rows (no missing values)\n",
    "- ✓ All features available at auction START\n",
    "- ✓ Ready for ML modeling"
   ]
  }
 ],
 "metadata": {
  "kaggle": {
   "accelerator": "none",
   "dataSources": [
    {
     "datasetId": 9095537,
     "sourceId": 14255085,
     "sourceType": "datasetVersion"
    }
   ],
   "dockerImageVersionId": 31239,
   "isGpuEnabled": false,
   "isInternetEnabled": true,
   "language": "python",
   "sourceType": "notebook"
  },
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.12.12"
  },
  "papermill": {
   "default_parameters": {},
   "duration": 9.61902,
   "end_time": "2025-12-22T10:51:13.740976",
   "environment_variables": {},
   "exception": null,
   "input_path": "__notebook__.ipynb",
   "output_path": "__notebook__.ipynb",
   "parameters": {},
   "start_time": "2025-12-22T10:51:04.121956",
   "version": "2.6.0"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
